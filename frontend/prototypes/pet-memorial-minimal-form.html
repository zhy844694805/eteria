<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>宠物纪念表单 - 永念</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #fafafa;
        }
        .card {
            background: white;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .input-minimal {
            border: 1px solid #e5e7eb;
            background: white;
            font-size: 16px;
            padding: 16px;
        }
        .input-minimal:focus {
            outline: none;
            border-color: #000;
        }
        .input-minimal::placeholder {
            color: #9ca3af;
        }
        .progress-bar {
            height: 2px;
            background: #f3f4f6;
        }
        .progress-fill {
            height: 100%;
            background: #000;
            transition: width 0.3s ease;
        }
        .trait-button {
            border: 1px solid #e5e7eb;
            background: white;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .trait-button:hover {
            border-color: #9ca3af;
        }
        .trait-button.selected {
            border-color: #000;
            background: #f9fafb;
        }
        .photo-upload {
            border: 2px dashed #d1d5db;
            background: #f9fafb;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .photo-upload:hover {
            border-color: #9ca3af;
            background: #f3f4f6;
        }
        .photo-preview {
            position: relative;
            display: inline-block;
        }
        .photo-remove {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 20px;
            height: 20px;
            background: #000;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 12px;
            line-height: 1;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- 进度条 -->
    <div class="progress-bar">
        <div class="progress-fill" id="progress" style="width: 33.33%;"></div>
    </div>

    <div class="max-w-lg mx-auto px-6 py-12">
        <!-- 步骤1：基本信息 -->
        <div class="card p-8 mb-8" id="step-1">
            <div class="mb-8">
                <div class="flex items-center justify-between mb-4">
                    <span class="text-xs text-gray-500">1 / 3</span>
                    <span class="text-xs text-gray-500">基本信息</span>
                </div>
                <h1 class="text-xl font-normal text-gray-900">告诉我们关于它</h1>
            </div>

            <div class="space-y-6">
                <input 
                    type="text" 
                    placeholder="宠物名字"
                    class="input-minimal w-full"
                    id="petName"
                    required
                />
                
                <div class="grid grid-cols-2 gap-4">
                    <select class="input-minimal" id="petType" required>
                        <option value="">动物类型</option>
                        <option value="dog">狗</option>
                        <option value="cat">猫</option>
                        <option value="bird">鸟</option>
                        <option value="rabbit">兔子</option>
                        <option value="hamster">仓鼠</option>
                        <option value="guinea-pig">豚鼠</option>
                        <option value="other">其他</option>
                    </select>
                    <select class="input-minimal" id="breed">
                        <option value="">品种</option>
                        <option value="mixed">混种</option>
                        <option value="unknown">不详</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <select class="input-minimal" id="color" required>
                        <option value="">颜色</option>
                        <option value="black">黑色</option>
                        <option value="white">白色</option>
                        <option value="brown">棕色</option>
                        <option value="gray">灰色</option>
                        <option value="black-white">黑白色</option>
                        <option value="brown-white">棕白色</option>
                        <option value="multicolor">多色</option>
                    </select>
                    <select class="input-minimal" id="gender" required>
                        <option value="">性别</option>
                        <option value="male">雄性</option>
                        <option value="female">雌性</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs text-gray-500 mb-2">出生日期</label>
                        <input 
                            type="date" 
                            class="input-minimal w-full"
                            id="birthDate"
                            required
                        />
                    </div>
                    <div>
                        <label class="block text-xs text-gray-500 mb-2">离开日期</label>
                        <input 
                            type="date" 
                            class="input-minimal w-full"
                            id="passingDate"
                            required
                        />
                    </div>
                </div>
                
                <div>
                    <div class="photo-upload p-8 text-center" onclick="document.getElementById('mainPhoto').click()">
                        <div class="text-gray-400 mb-2">
                            <svg class="w-8 h-8 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                        </div>
                        <span class="text-sm text-gray-500">添加主照片</span>
                    </div>
                    <input type="file" id="mainPhoto" accept="image/*" style="display: none;" onchange="handleMainPhoto(this)">
                    <div id="mainPhotoPreview" class="mt-4" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- 步骤2：性格和回忆 -->
        <div class="card p-8 mb-8 opacity-30 transform scale-95 -mt-4" id="step-2" style="display: none;">
            <div class="mb-8">
                <div class="flex items-center justify-between mb-4">
                    <span class="text-xs text-gray-500">2 / 3</span>
                    <span class="text-xs text-gray-500">性格回忆</span>
                </div>
                <h1 class="text-xl font-normal text-gray-900">它的性格特点</h1>
            </div>

            <div class="space-y-8">
                <!-- 性格特征 -->
                <div>
                    <h3 class="text-sm font-medium text-gray-700 mb-4">性格特征（可多选）</h3>
                    <div class="grid grid-cols-3 gap-3">
                        <button class="trait-button" data-trait="playful" onclick="toggleTrait(this)">
                            <div class="text-lg mb-1">🎾</div>
                            <div class="text-xs">顽皮</div>
                        </button>
                        <button class="trait-button" data-trait="loyal" onclick="toggleTrait(this)">
                            <div class="text-lg mb-1">❤️</div>
                            <div class="text-xs">忠诚</div>
                        </button>
                        <button class="trait-button" data-trait="gentle" onclick="toggleTrait(this)">
                            <div class="text-lg mb-1">🕊️</div>
                            <div class="text-xs">温柔</div>
                        </button>
                        <button class="trait-button" data-trait="energetic" onclick="toggleTrait(this)">
                            <div class="text-lg mb-1">⚡</div>
                            <div class="text-xs">活跃</div>
                        </button>
                        <button class="trait-button" data-trait="calm" onclick="toggleTrait(this)">
                            <div class="text-lg mb-1">😌</div>
                            <div class="text-xs">安静</div>
                        </button>
                        <button class="trait-button" data-trait="friendly" onclick="toggleTrait(this)">
                            <div class="text-lg mb-1">😊</div>
                            <div class="text-xs">友好</div>
                        </button>
                    </div>
                </div>

                <!-- 喜欢的活动 -->
                <div>
                    <h3 class="text-sm font-medium text-gray-700 mb-4">喜欢的活动（可多选）</h3>
                    <div class="grid grid-cols-3 gap-3">
                        <button class="trait-button" data-activity="walking" onclick="toggleActivity(this)">
                            <div class="text-lg mb-1">🚶</div>
                            <div class="text-xs">散步</div>
                        </button>
                        <button class="trait-button" data-activity="playing" onclick="toggleActivity(this)">
                            <div class="text-lg mb-1">🎾</div>
                            <div class="text-xs">玩耍</div>
                        </button>
                        <button class="trait-button" data-activity="sleeping" onclick="toggleActivity(this)">
                            <div class="text-lg mb-1">😴</div>
                            <div class="text-xs">睡觉</div>
                        </button>
                        <button class="trait-button" data-activity="eating" onclick="toggleActivity(this)">
                            <div class="text-lg mb-1">🍖</div>
                            <div class="text-xs">吃饭</div>
                        </button>
                        <button class="trait-button" data-activity="swimming" onclick="toggleActivity(this)">
                            <div class="text-lg mb-1">🏊</div>
                            <div class="text-xs">游泳</div>
                        </button>
                        <button class="trait-button" data-activity="cuddling" onclick="toggleActivity(this)">
                            <div class="text-lg mb-1">🤗</div>
                            <div class="text-xs">拥抱</div>
                        </button>
                    </div>
                </div>

                <!-- 特别回忆 -->
                <div>
                    <textarea 
                        placeholder="分享一个特别的回忆或故事..."
                        rows="4"
                        class="input-minimal w-full resize-none"
                        id="specialMemory"
                    ></textarea>
                </div>
            </div>
        </div>

        <!-- 步骤3：完成创建 -->
        <div class="card p-8 mb-8 opacity-20 transform scale-90 -mt-4" id="step-3" style="display: none;">
            <div class="mb-8">
                <div class="flex items-center justify-between mb-4">
                    <span class="text-xs text-gray-500">3 / 3</span>
                    <span class="text-xs text-gray-500">完成创建</span>
                </div>
                <h1 class="text-xl font-normal text-gray-900">完成纪念页面</h1>
            </div>

            <div class="space-y-6">
                <div class="bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-sm font-medium text-gray-700 mb-4">预览信息</h3>
                    <div id="previewContent" class="text-sm text-gray-600 space-y-2">
                        <!-- 动态生成预览内容 -->
                    </div>
                </div>

                <div>
                    <input 
                        type="text" 
                        placeholder="您的姓名"
                        class="input-minimal w-full"
                        id="creatorName"
                        required
                    />
                </div>

                <div>
                    <input 
                        type="email" 
                        placeholder="您的邮箱"
                        class="input-minimal w-full"
                        id="creatorEmail"
                        required
                    />
                </div>
            </div>
        </div>

        <!-- 操作按钮 -->
        <div class="flex justify-between items-center mt-12">
            <button class="text-gray-500 text-sm hover:text-gray-700 transition-colors" onclick="previousStep()" id="backBtn">
                ← 返回
            </button>
            <button class="bg-black text-white px-8 py-3 text-sm hover:bg-gray-800 transition-colors" onclick="nextStep()" id="nextBtn">
                下一步
            </button>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let formData = {
            traits: [],
            activities: [],
            mainPhoto: null
        };

        // 更新品种选项
        document.getElementById('petType').addEventListener('change', function() {
            const breedSelect = document.getElementById('breed');
            const petType = this.value;
            breedSelect.innerHTML = '<option value="">品种</option>';
            
            let breeds = [];
            switch(petType) {
                case 'dog':
                    breeds = ['拉布拉多', '金毛', '哈士奇', '柴犬', '柯基', '贵宾犬', '比格犬', '混种犬'];
                    break;
                case 'cat':
                    breeds = ['英短', '美短', '波斯猫', '暹罗猫', '布偶猫', '缅因猫', '苏格兰折耳', '混种猫'];
                    break;
                case 'bird':
                    breeds = ['虎皮鹦鹉', '玄凤鹦鹉', '金丝雀', '文鸟', '其他鸟类'];
                    break;
                case 'rabbit':
                    breeds = ['荷兰垂耳兔', '荷兰侏儒兔', '狮子头兔', '安哥拉兔', '其他兔种'];
                    break;
                default:
                    breeds = ['混种', '不详'];
            }
            
            breeds.forEach(breed => {
                const option = document.createElement('option');
                option.value = breed.toLowerCase().replace(/\s/g, '-');
                option.textContent = breed;
                breedSelect.appendChild(option);
            });
        });

        // 处理主照片上传
        function handleMainPhoto(input) {
            const file = input.files[0];
            if (file) {
                formData.mainPhoto = file;
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('mainPhotoPreview');
                    preview.innerHTML = `
                        <div class="photo-preview">
                            <img src="${e.target.result}" alt="主照片" class="w-32 h-24 object-cover rounded">
                            <button class="photo-remove" onclick="removeMainPhoto()">×</button>
                        </div>
                    `;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        }

        function removeMainPhoto() {
            formData.mainPhoto = null;
            document.getElementById('mainPhoto').value = '';
            document.getElementById('mainPhotoPreview').style.display = 'none';
        }

        // 性格特征选择
        function toggleTrait(button) {
            const trait = button.dataset.trait;
            if (button.classList.contains('selected')) {
                button.classList.remove('selected');
                formData.traits = formData.traits.filter(t => t !== trait);
            } else {
                button.classList.add('selected');
                formData.traits.push(trait);
            }
        }

        // 活动选择
        function toggleActivity(button) {
            const activity = button.dataset.activity;
            if (button.classList.contains('selected')) {
                button.classList.remove('selected');
                formData.activities = formData.activities.filter(a => a !== activity);
            } else {
                button.classList.add('selected');
                formData.activities.push(activity);
            }
        }

        // 验证当前步骤
        function validateCurrentStep() {
            switch(currentStep) {
                case 1:
                    const requiredFields = ['petName', 'petType', 'color', 'gender', 'birthDate', 'passingDate'];
                    return requiredFields.every(field => {
                        const value = document.getElementById(field).value.trim();
                        return value !== '';
                    }) && formData.mainPhoto;
                case 2:
                    return formData.traits.length > 0 && formData.activities.length > 0;
                case 3:
                    const creatorName = document.getElementById('creatorName').value.trim();
                    const creatorEmail = document.getElementById('creatorEmail').value.trim();
                    return creatorName && creatorEmail;
                default:
                    return false;
            }
        }

        // 下一步
        function nextStep() {
            if (!validateCurrentStep()) {
                alert('请完整填写当前步骤的必填信息');
                return;
            }

            if (currentStep < 3) {
                document.getElementById(`step-${currentStep}`).style.display = 'none';
                currentStep++;
                document.getElementById(`step-${currentStep}`).style.display = 'block';
                document.getElementById(`step-${currentStep}`).classList.remove('opacity-30', 'opacity-20', 'scale-95', 'scale-90');
                
                // 更新进度条
                const progress = (currentStep / 3) * 100;
                document.getElementById('progress').style.width = progress + '%';
                
                // 更新按钮文字
                if (currentStep === 3) {
                    document.getElementById('nextBtn').textContent = '创建纪念页面';
                    updatePreview();
                }
            } else {
                // 提交表单
                submitForm();
            }
        }

        // 上一步
        function previousStep() {
            if (currentStep > 1) {
                document.getElementById(`step-${currentStep}`).style.display = 'none';
                currentStep--;
                document.getElementById(`step-${currentStep}`).style.display = 'block';
                
                // 更新进度条
                const progress = (currentStep / 3) * 100;
                document.getElementById('progress').style.width = progress + '%';
                
                // 更新按钮文字
                document.getElementById('nextBtn').textContent = '下一步';
            } else {
                // 返回首页
                if (confirm('确定要返回首页吗？当前填写的信息将会丢失。')) {
                    window.location.href = '/';
                }
            }
        }

        // 更新预览
        function updatePreview() {
            const petName = document.getElementById('petName').value;
            const petType = document.getElementById('petType').options[document.getElementById('petType').selectedIndex].text;
            const breed = document.getElementById('breed').options[document.getElementById('breed').selectedIndex].text;
            const color = document.getElementById('color').options[document.getElementById('color').selectedIndex].text;
            const birthDate = document.getElementById('birthDate').value;
            const passingDate = document.getElementById('passingDate').value;
            
            const traits = formData.traits.join('、');
            const activities = formData.activities.join('、');
            const specialMemory = document.getElementById('specialMemory').value;
            
            document.getElementById('previewContent').innerHTML = `
                <div><strong>宠物姓名：</strong>${petName}</div>
                <div><strong>类型品种：</strong>${petType} - ${breed}</div>
                <div><strong>颜色：</strong>${color}</div>
                <div><strong>生命历程：</strong>${birthDate} ~ ${passingDate}</div>
                <div><strong>性格特征：</strong>${traits}</div>
                <div><strong>喜欢活动：</strong>${activities}</div>
                ${specialMemory ? `<div><strong>特别回忆：</strong>${specialMemory}</div>` : ''}
            `;
        }

        // 提交表单
        function submitForm() {
            const formData = {
                petName: document.getElementById('petName').value,
                petType: document.getElementById('petType').value,
                breed: document.getElementById('breed').value,
                color: document.getElementById('color').value,
                gender: document.getElementById('gender').value,
                birthDate: document.getElementById('birthDate').value,
                passingDate: document.getElementById('passingDate').value,
                traits: formData.traits,
                activities: formData.activities,
                specialMemory: document.getElementById('specialMemory').value,
                creatorName: document.getElementById('creatorName').value,
                creatorEmail: document.getElementById('creatorEmail').value,
                mainPhoto: formData.mainPhoto
            };
            
            document.getElementById('nextBtn').innerHTML = '创建中...';
            document.getElementById('nextBtn').disabled = true;
            
            // 模拟提交
            setTimeout(() => {
                alert('纪念页面创建成功！');
                console.log('表单数据：', formData);
            }, 2000);
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 显示第一步
            document.getElementById(`step-${currentStep}`).style.display = 'block';
            document.getElementById(`step-${currentStep}`).classList.remove('opacity-30', 'scale-95');
        });
    </script>
</body>
</html>