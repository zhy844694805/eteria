<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å® ç‰©çºªå¿µè¡¨å• - æ°¸å¿µ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #fafafa;
        }
        .card {
            background: white;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .input-minimal {
            border: 1px solid #e5e7eb;
            background: white;
            font-size: 16px;
            padding: 16px;
        }
        .input-minimal:focus {
            outline: none;
            border-color: #000;
        }
        .input-minimal::placeholder {
            color: #9ca3af;
        }
        .progress-bar {
            height: 2px;
            background: #f3f4f6;
        }
        .progress-fill {
            height: 100%;
            background: #000;
            transition: width 0.3s ease;
        }
        .trait-button {
            border: 1px solid #e5e7eb;
            background: white;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .trait-button:hover {
            border-color: #9ca3af;
        }
        .trait-button.selected {
            border-color: #000;
            background: #f9fafb;
        }
        .photo-upload {
            border: 2px dashed #d1d5db;
            background: #f9fafb;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .photo-upload:hover {
            border-color: #9ca3af;
            background: #f3f4f6;
        }
        .photo-preview {
            position: relative;
            display: inline-block;
        }
        .photo-remove {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 20px;
            height: 20px;
            background: #000;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 12px;
            line-height: 1;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- è¿›åº¦æ¡ -->
    <div class="progress-bar">
        <div class="progress-fill" id="progress" style="width: 33.33%;"></div>
    </div>

    <div class="max-w-lg mx-auto px-6 py-12">
        <!-- æ­¥éª¤1ï¼šåŸºæœ¬ä¿¡æ¯ -->
        <div class="card p-8 mb-8" id="step-1">
            <div class="mb-8">
                <div class="flex items-center justify-between mb-4">
                    <span class="text-xs text-gray-500">1 / 3</span>
                    <span class="text-xs text-gray-500">åŸºæœ¬ä¿¡æ¯</span>
                </div>
                <h1 class="text-xl font-normal text-gray-900">å‘Šè¯‰æˆ‘ä»¬å…³äºå®ƒ</h1>
            </div>

            <div class="space-y-6">
                <input 
                    type="text" 
                    placeholder="å® ç‰©åå­—"
                    class="input-minimal w-full"
                    id="petName"
                    required
                />
                
                <div class="grid grid-cols-2 gap-4">
                    <select class="input-minimal" id="petType" required>
                        <option value="">åŠ¨ç‰©ç±»å‹</option>
                        <option value="dog">ç‹—</option>
                        <option value="cat">çŒ«</option>
                        <option value="bird">é¸Ÿ</option>
                        <option value="rabbit">å…”å­</option>
                        <option value="hamster">ä»“é¼ </option>
                        <option value="guinea-pig">è±šé¼ </option>
                        <option value="other">å…¶ä»–</option>
                    </select>
                    <select class="input-minimal" id="breed">
                        <option value="">å“ç§</option>
                        <option value="mixed">æ··ç§</option>
                        <option value="unknown">ä¸è¯¦</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <select class="input-minimal" id="color" required>
                        <option value="">é¢œè‰²</option>
                        <option value="black">é»‘è‰²</option>
                        <option value="white">ç™½è‰²</option>
                        <option value="brown">æ£•è‰²</option>
                        <option value="gray">ç°è‰²</option>
                        <option value="black-white">é»‘ç™½è‰²</option>
                        <option value="brown-white">æ£•ç™½è‰²</option>
                        <option value="multicolor">å¤šè‰²</option>
                    </select>
                    <select class="input-minimal" id="gender" required>
                        <option value="">æ€§åˆ«</option>
                        <option value="male">é›„æ€§</option>
                        <option value="female">é›Œæ€§</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs text-gray-500 mb-2">å‡ºç”Ÿæ—¥æœŸ</label>
                        <input 
                            type="date" 
                            class="input-minimal w-full"
                            id="birthDate"
                            required
                        />
                    </div>
                    <div>
                        <label class="block text-xs text-gray-500 mb-2">ç¦»å¼€æ—¥æœŸ</label>
                        <input 
                            type="date" 
                            class="input-minimal w-full"
                            id="passingDate"
                            required
                        />
                    </div>
                </div>
                
                <div>
                    <div class="photo-upload p-8 text-center" onclick="document.getElementById('mainPhoto').click()">
                        <div class="text-gray-400 mb-2">
                            <svg class="w-8 h-8 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                        </div>
                        <span class="text-sm text-gray-500">æ·»åŠ ä¸»ç…§ç‰‡</span>
                    </div>
                    <input type="file" id="mainPhoto" accept="image/*" style="display: none;" onchange="handleMainPhoto(this)">
                    <div id="mainPhotoPreview" class="mt-4" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- æ­¥éª¤2ï¼šæ€§æ ¼å’Œå›å¿† -->
        <div class="card p-8 mb-8 opacity-30 transform scale-95 -mt-4" id="step-2" style="display: none;">
            <div class="mb-8">
                <div class="flex items-center justify-between mb-4">
                    <span class="text-xs text-gray-500">2 / 3</span>
                    <span class="text-xs text-gray-500">æ€§æ ¼å›å¿†</span>
                </div>
                <h1 class="text-xl font-normal text-gray-900">å®ƒçš„æ€§æ ¼ç‰¹ç‚¹</h1>
            </div>

            <div class="space-y-8">
                <!-- æ€§æ ¼ç‰¹å¾ -->
                <div>
                    <h3 class="text-sm font-medium text-gray-700 mb-4">æ€§æ ¼ç‰¹å¾ï¼ˆå¯å¤šé€‰ï¼‰</h3>
                    <div class="grid grid-cols-3 gap-3">
                        <button class="trait-button" data-trait="playful" onclick="toggleTrait(this)">
                            <div class="text-lg mb-1">ğŸ¾</div>
                            <div class="text-xs">é¡½çš®</div>
                        </button>
                        <button class="trait-button" data-trait="loyal" onclick="toggleTrait(this)">
                            <div class="text-lg mb-1">â¤ï¸</div>
                            <div class="text-xs">å¿ è¯š</div>
                        </button>
                        <button class="trait-button" data-trait="gentle" onclick="toggleTrait(this)">
                            <div class="text-lg mb-1">ğŸ•Šï¸</div>
                            <div class="text-xs">æ¸©æŸ”</div>
                        </button>
                        <button class="trait-button" data-trait="energetic" onclick="toggleTrait(this)">
                            <div class="text-lg mb-1">âš¡</div>
                            <div class="text-xs">æ´»è·ƒ</div>
                        </button>
                        <button class="trait-button" data-trait="calm" onclick="toggleTrait(this)">
                            <div class="text-lg mb-1">ğŸ˜Œ</div>
                            <div class="text-xs">å®‰é™</div>
                        </button>
                        <button class="trait-button" data-trait="friendly" onclick="toggleTrait(this)">
                            <div class="text-lg mb-1">ğŸ˜Š</div>
                            <div class="text-xs">å‹å¥½</div>
                        </button>
                    </div>
                </div>

                <!-- å–œæ¬¢çš„æ´»åŠ¨ -->
                <div>
                    <h3 class="text-sm font-medium text-gray-700 mb-4">å–œæ¬¢çš„æ´»åŠ¨ï¼ˆå¯å¤šé€‰ï¼‰</h3>
                    <div class="grid grid-cols-3 gap-3">
                        <button class="trait-button" data-activity="walking" onclick="toggleActivity(this)">
                            <div class="text-lg mb-1">ğŸš¶</div>
                            <div class="text-xs">æ•£æ­¥</div>
                        </button>
                        <button class="trait-button" data-activity="playing" onclick="toggleActivity(this)">
                            <div class="text-lg mb-1">ğŸ¾</div>
                            <div class="text-xs">ç©è€</div>
                        </button>
                        <button class="trait-button" data-activity="sleeping" onclick="toggleActivity(this)">
                            <div class="text-lg mb-1">ğŸ˜´</div>
                            <div class="text-xs">ç¡è§‰</div>
                        </button>
                        <button class="trait-button" data-activity="eating" onclick="toggleActivity(this)">
                            <div class="text-lg mb-1">ğŸ–</div>
                            <div class="text-xs">åƒé¥­</div>
                        </button>
                        <button class="trait-button" data-activity="swimming" onclick="toggleActivity(this)">
                            <div class="text-lg mb-1">ğŸŠ</div>
                            <div class="text-xs">æ¸¸æ³³</div>
                        </button>
                        <button class="trait-button" data-activity="cuddling" onclick="toggleActivity(this)">
                            <div class="text-lg mb-1">ğŸ¤—</div>
                            <div class="text-xs">æ‹¥æŠ±</div>
                        </button>
                    </div>
                </div>

                <!-- ç‰¹åˆ«å›å¿† -->
                <div>
                    <textarea 
                        placeholder="åˆ†äº«ä¸€ä¸ªç‰¹åˆ«çš„å›å¿†æˆ–æ•…äº‹..."
                        rows="4"
                        class="input-minimal w-full resize-none"
                        id="specialMemory"
                    ></textarea>
                </div>
            </div>
        </div>

        <!-- æ­¥éª¤3ï¼šå®Œæˆåˆ›å»º -->
        <div class="card p-8 mb-8 opacity-20 transform scale-90 -mt-4" id="step-3" style="display: none;">
            <div class="mb-8">
                <div class="flex items-center justify-between mb-4">
                    <span class="text-xs text-gray-500">3 / 3</span>
                    <span class="text-xs text-gray-500">å®Œæˆåˆ›å»º</span>
                </div>
                <h1 class="text-xl font-normal text-gray-900">å®Œæˆçºªå¿µé¡µé¢</h1>
            </div>

            <div class="space-y-6">
                <div class="bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-sm font-medium text-gray-700 mb-4">é¢„è§ˆä¿¡æ¯</h3>
                    <div id="previewContent" class="text-sm text-gray-600 space-y-2">
                        <!-- åŠ¨æ€ç”Ÿæˆé¢„è§ˆå†…å®¹ -->
                    </div>
                </div>

                <div>
                    <input 
                        type="text" 
                        placeholder="æ‚¨çš„å§“å"
                        class="input-minimal w-full"
                        id="creatorName"
                        required
                    />
                </div>

                <div>
                    <input 
                        type="email" 
                        placeholder="æ‚¨çš„é‚®ç®±"
                        class="input-minimal w-full"
                        id="creatorEmail"
                        required
                    />
                </div>
            </div>
        </div>

        <!-- æ“ä½œæŒ‰é’® -->
        <div class="flex justify-between items-center mt-12">
            <button class="text-gray-500 text-sm hover:text-gray-700 transition-colors" onclick="previousStep()" id="backBtn">
                â† è¿”å›
            </button>
            <button class="bg-black text-white px-8 py-3 text-sm hover:bg-gray-800 transition-colors" onclick="nextStep()" id="nextBtn">
                ä¸‹ä¸€æ­¥
            </button>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let formData = {
            traits: [],
            activities: [],
            mainPhoto: null
        };

        // æ›´æ–°å“ç§é€‰é¡¹
        document.getElementById('petType').addEventListener('change', function() {
            const breedSelect = document.getElementById('breed');
            const petType = this.value;
            breedSelect.innerHTML = '<option value="">å“ç§</option>';
            
            let breeds = [];
            switch(petType) {
                case 'dog':
                    breeds = ['æ‹‰å¸ƒæ‹‰å¤š', 'é‡‘æ¯›', 'å“ˆå£«å¥‡', 'æŸ´çŠ¬', 'æŸ¯åŸº', 'è´µå®¾çŠ¬', 'æ¯”æ ¼çŠ¬', 'æ··ç§çŠ¬'];
                    break;
                case 'cat':
                    breeds = ['è‹±çŸ­', 'ç¾çŸ­', 'æ³¢æ–¯çŒ«', 'æš¹ç½—çŒ«', 'å¸ƒå¶çŒ«', 'ç¼…å› çŒ«', 'è‹æ ¼å…°æŠ˜è€³', 'æ··ç§çŒ«'];
                    break;
                case 'bird':
                    breeds = ['è™çš®é¹¦é¹‰', 'ç„å‡¤é¹¦é¹‰', 'é‡‘ä¸é›€', 'æ–‡é¸Ÿ', 'å…¶ä»–é¸Ÿç±»'];
                    break;
                case 'rabbit':
                    breeds = ['è·å…°å‚è€³å…”', 'è·å…°ä¾å„’å…”', 'ç‹®å­å¤´å…”', 'å®‰å“¥æ‹‰å…”', 'å…¶ä»–å…”ç§'];
                    break;
                default:
                    breeds = ['æ··ç§', 'ä¸è¯¦'];
            }
            
            breeds.forEach(breed => {
                const option = document.createElement('option');
                option.value = breed.toLowerCase().replace(/\s/g, '-');
                option.textContent = breed;
                breedSelect.appendChild(option);
            });
        });

        // å¤„ç†ä¸»ç…§ç‰‡ä¸Šä¼ 
        function handleMainPhoto(input) {
            const file = input.files[0];
            if (file) {
                formData.mainPhoto = file;
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('mainPhotoPreview');
                    preview.innerHTML = `
                        <div class="photo-preview">
                            <img src="${e.target.result}" alt="ä¸»ç…§ç‰‡" class="w-32 h-24 object-cover rounded">
                            <button class="photo-remove" onclick="removeMainPhoto()">Ã—</button>
                        </div>
                    `;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        }

        function removeMainPhoto() {
            formData.mainPhoto = null;
            document.getElementById('mainPhoto').value = '';
            document.getElementById('mainPhotoPreview').style.display = 'none';
        }

        // æ€§æ ¼ç‰¹å¾é€‰æ‹©
        function toggleTrait(button) {
            const trait = button.dataset.trait;
            if (button.classList.contains('selected')) {
                button.classList.remove('selected');
                formData.traits = formData.traits.filter(t => t !== trait);
            } else {
                button.classList.add('selected');
                formData.traits.push(trait);
            }
        }

        // æ´»åŠ¨é€‰æ‹©
        function toggleActivity(button) {
            const activity = button.dataset.activity;
            if (button.classList.contains('selected')) {
                button.classList.remove('selected');
                formData.activities = formData.activities.filter(a => a !== activity);
            } else {
                button.classList.add('selected');
                formData.activities.push(activity);
            }
        }

        // éªŒè¯å½“å‰æ­¥éª¤
        function validateCurrentStep() {
            switch(currentStep) {
                case 1:
                    const requiredFields = ['petName', 'petType', 'color', 'gender', 'birthDate', 'passingDate'];
                    return requiredFields.every(field => {
                        const value = document.getElementById(field).value.trim();
                        return value !== '';
                    }) && formData.mainPhoto;
                case 2:
                    return formData.traits.length > 0 && formData.activities.length > 0;
                case 3:
                    const creatorName = document.getElementById('creatorName').value.trim();
                    const creatorEmail = document.getElementById('creatorEmail').value.trim();
                    return creatorName && creatorEmail;
                default:
                    return false;
            }
        }

        // ä¸‹ä¸€æ­¥
        function nextStep() {
            if (!validateCurrentStep()) {
                alert('è¯·å®Œæ•´å¡«å†™å½“å‰æ­¥éª¤çš„å¿…å¡«ä¿¡æ¯');
                return;
            }

            if (currentStep < 3) {
                document.getElementById(`step-${currentStep}`).style.display = 'none';
                currentStep++;
                document.getElementById(`step-${currentStep}`).style.display = 'block';
                document.getElementById(`step-${currentStep}`).classList.remove('opacity-30', 'opacity-20', 'scale-95', 'scale-90');
                
                // æ›´æ–°è¿›åº¦æ¡
                const progress = (currentStep / 3) * 100;
                document.getElementById('progress').style.width = progress + '%';
                
                // æ›´æ–°æŒ‰é’®æ–‡å­—
                if (currentStep === 3) {
                    document.getElementById('nextBtn').textContent = 'åˆ›å»ºçºªå¿µé¡µé¢';
                    updatePreview();
                }
            } else {
                // æäº¤è¡¨å•
                submitForm();
            }
        }

        // ä¸Šä¸€æ­¥
        function previousStep() {
            if (currentStep > 1) {
                document.getElementById(`step-${currentStep}`).style.display = 'none';
                currentStep--;
                document.getElementById(`step-${currentStep}`).style.display = 'block';
                
                // æ›´æ–°è¿›åº¦æ¡
                const progress = (currentStep / 3) * 100;
                document.getElementById('progress').style.width = progress + '%';
                
                // æ›´æ–°æŒ‰é’®æ–‡å­—
                document.getElementById('nextBtn').textContent = 'ä¸‹ä¸€æ­¥';
            } else {
                // è¿”å›é¦–é¡µ
                if (confirm('ç¡®å®šè¦è¿”å›é¦–é¡µå—ï¼Ÿå½“å‰å¡«å†™çš„ä¿¡æ¯å°†ä¼šä¸¢å¤±ã€‚')) {
                    window.location.href = '/';
                }
            }
        }

        // æ›´æ–°é¢„è§ˆ
        function updatePreview() {
            const petName = document.getElementById('petName').value;
            const petType = document.getElementById('petType').options[document.getElementById('petType').selectedIndex].text;
            const breed = document.getElementById('breed').options[document.getElementById('breed').selectedIndex].text;
            const color = document.getElementById('color').options[document.getElementById('color').selectedIndex].text;
            const birthDate = document.getElementById('birthDate').value;
            const passingDate = document.getElementById('passingDate').value;
            
            const traits = formData.traits.join('ã€');
            const activities = formData.activities.join('ã€');
            const specialMemory = document.getElementById('specialMemory').value;
            
            document.getElementById('previewContent').innerHTML = `
                <div><strong>å® ç‰©å§“åï¼š</strong>${petName}</div>
                <div><strong>ç±»å‹å“ç§ï¼š</strong>${petType} - ${breed}</div>
                <div><strong>é¢œè‰²ï¼š</strong>${color}</div>
                <div><strong>ç”Ÿå‘½å†ç¨‹ï¼š</strong>${birthDate} ~ ${passingDate}</div>
                <div><strong>æ€§æ ¼ç‰¹å¾ï¼š</strong>${traits}</div>
                <div><strong>å–œæ¬¢æ´»åŠ¨ï¼š</strong>${activities}</div>
                ${specialMemory ? `<div><strong>ç‰¹åˆ«å›å¿†ï¼š</strong>${specialMemory}</div>` : ''}
            `;
        }

        // æäº¤è¡¨å•
        function submitForm() {
            const formData = {
                petName: document.getElementById('petName').value,
                petType: document.getElementById('petType').value,
                breed: document.getElementById('breed').value,
                color: document.getElementById('color').value,
                gender: document.getElementById('gender').value,
                birthDate: document.getElementById('birthDate').value,
                passingDate: document.getElementById('passingDate').value,
                traits: formData.traits,
                activities: formData.activities,
                specialMemory: document.getElementById('specialMemory').value,
                creatorName: document.getElementById('creatorName').value,
                creatorEmail: document.getElementById('creatorEmail').value,
                mainPhoto: formData.mainPhoto
            };
            
            document.getElementById('nextBtn').innerHTML = 'åˆ›å»ºä¸­...';
            document.getElementById('nextBtn').disabled = true;
            
            // æ¨¡æ‹Ÿæäº¤
            setTimeout(() => {
                alert('çºªå¿µé¡µé¢åˆ›å»ºæˆåŠŸï¼');
                console.log('è¡¨å•æ•°æ®ï¼š', formData);
            }, 2000);
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ˜¾ç¤ºç¬¬ä¸€æ­¥
            document.getElementById(`step-${currentStep}`).style.display = 'block';
            document.getElementById(`step-${currentStep}`).classList.remove('opacity-30', 'scale-95');
        });
    </script>
</body>
</html>